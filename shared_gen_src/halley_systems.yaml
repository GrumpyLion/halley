---

message:
  name: StartScript
  members:
  - name: 'Halley::String'
  - tags: 'Halley::Vector<Halley::String>'
  - params: 'Halley::Vector<Halley::ConfigNode>'
  serializable: true

  
---

message:
  name: TerminateScript
  members:
  - name: 'Halley::String'
  serializable: true

---

message:
  name: TerminateScriptsWithTag
  members:
  - tag: 'Halley::String'
  serializable: true
  destination: allClients

---

systemMessage:
  name: TerminateScriptsWithTag
  members:
  - scriptableId: 'Halley::EntityId'
  - tag: 'Halley::String'
  destination: allClients
  multicast: true
  serializable: true

---

type:
  name: ScriptMessage
  include: halley/scripting/script_message.h

---

message:
  name: SendScriptMsg
  members:
  - msg: 'Halley::ScriptMessage'
  serializable: true

---

system:
  name: Script
  families:
  - scriptable:
    - Scriptable: write
  - embeddedScript:
    - Scriptable: write
    - EmbeddedScript: write
  - target:
    - ScriptTarget: read
  - tagTargets:
    - ScriptTagTarget: read
  strategy: global
  services:
  - ScriptingService
  - DevService
  access:
  - world
  - resources
  - api
  - messageBridge
  messages:
  - StartScript: receive scriptable
  - TerminateScript: receive scriptable
  - TerminateScriptsWithTag: receive scriptable
  - SendScriptMsg: send receive scriptable
  systemMessages:
  - TerminateScriptsWithTag: receive

---

systemMessage:
  name: NetworkEntityLock
  members:
    - target: Halley::EntityId
    - lock: bool
    - peerId: uint8_t
  destination: host
  serializable: true
  returnType: bool

---

system:
  name: NetworkReceive
  families:
  - network:
    - Network: write
  strategy: global
  services:
    - SessionService
    - DevService
  access:
    - world
    - resources
    - messageBridge
    - api

---

system:
  name: NetworkLock
  families:
  - network:
    - Network: write
  strategy: global
  systemMessages:
    - NetworkEntityLock: send receive
  services:
    - SessionService
    - ScriptingService optional
  access:
    - world

---

system:
  name: NetworkSend
  families:
  - network:
    - Network: write
  strategy: global
  services:
    - SessionService
    - ScreenService
  access:
    - world
    - resources

---

message:
  name: PlayAnimation
  members:
  - sequence: 'Halley::String'

---

message:
  name: PlayAnimationOnce
  members:
  - sequence: 'Halley::String'

---

component:
  name: SpriteAnimationReplicator

---

system:
  name: SpriteAnimation
  families:
  - main:
    - Transform2D: read
    - Sprite: write
    - SpriteAnimation: write
  - replicator:
    - Sprite: write
    - SpriteAnimationReplicator: read
    - SpriteAnimation: write
  strategy: global
  access:
  - world
  messages:
  - PlayAnimation: receive
  - PlayAnimationOnce: receive
  services:
  - ScreenService

---

message:
    name: StopParticles
    serializable: true

---

system:
  name: Particle
  families:
  - particle:
    - Transform2D: read
    - Particles: write
  strategy: global
  access:
  - world
  services:
  - DevService
  messages:
  - StopParticles: receive particle

...